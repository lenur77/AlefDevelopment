// import{ quantity } from "./module/modal.js"
// import{ modal } from "./module/modal.js"
// quantity();
// modal();
function burgerNav() {
  const burger = document.querySelector('.burger');
  const menu = document.querySelector('.burger-nav');
  const menuLinks = menu.querySelectorAll('.burger-nav__link');
  const closeLink = menu.querySelector("a[href='#close']");
  closeLink.addEventListener('click', () => {
    menu.classList.remove('open');
  });
  burger.addEventListener('click', () => {
    menu.classList.toggle('open');
  });
  menuLinks.forEach(link => {
    link.addEventListener('click', () => {
      menu.classList.remove('open');
    });
  });
  document.addEventListener('click', event => {
    if (!(event.target.closest('.burger-nav') || event.target.closest('.burger'))) menu.classList.remove('open');
  });
}

burgerNav();
function formData() {
  let outputTitle = document.querySelector(".card-description__title").textContent;
  let outputArt = document.querySelector(".card-description__text").textContent;
  let outputData = document.querySelector("#itemName");
  outputData.innerHTML = outputTitle + " с артикулом " + outputArt;
}

formData();
let galleryImage = smallImg => {
  const bigPhoto = document.getElementById('bigPhoto');
  bigPhoto.src = smallImg.src;
};
// let mask = () => {
//  mask = document.createElement('div')
//   mask.classList.add('wrapper__mask')
// }
function modal() {
  const modalBtn = document.querySelectorAll('.card-cart__button');
  const modal = document.querySelector('.modal');
  const modalClose = document.querySelector('.btn-close');
  const modalSend = document.querySelector('.modal-button');
  const mask = document.querySelector('.modal__mask');
  modalBtn.forEach(mBtn => {
    mBtn.addEventListener('click', () => {
      modal.classList.remove('hidden');
      mask.classList.remove('hidden');
    });
  });
  mask.addEventListener('click', () => {
    modal.classList.add('hidden');
    mask.classList.add('hidden');
  });
  modalClose.addEventListener('click', () => {
    modal.classList.add('hidden');
    mask.classList.add('hidden');
  });
  modalSend.addEventListener('click', () => {
    modal.classList.add('hidden');
    mask.classList.add('hidden');
  });
}

modal();
let navSticky = () => {
  let lastScrollTop = 500; // const header = document.querySelector('.header');

  headerNav = document.querySelector('.burger-nav');
  header = document.querySelector('.header');
  window.addEventListener('scroll', () => {
    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (scrollTop > lastScrollTop) {
      header.style.opacity = 0;
      headerNav.style.opacity = 0;
    } else {
      header.style.opacity = 1;
      headerNav.style.opacity = 1;
    }
  });
};

navSticky();
function quantity() {
  const plus = document.querySelector('.quantity__button_plus');
  const minus = document.querySelector('.quantity__button_minus');
  const input = document.querySelector('.quantity__input');
  const data = document.querySelector('#itemQuantity');
  let a = 1;
  plus.addEventListener("click", () => {
    a++; // a = (a < 10) ? "0" + a : a;

    input.value = a;
    data.innerHTML = a;
  });
  minus.addEventListener("click", () => {
    if (a > 0) {
      a--; // a = (a < 10) ? "0" + a : a;

      input.value = a;
      data.innerHTML = a;
    }
  });
}

quantity(); // let updateQuantity = () => {
//     // let p = document.querySelector('.p')
//    let p = quantity();
//     console.log(p)
// }
// const plus = document.querySelector('.quantity__button_plus');
// const minus = document.querySelector('.quantity__button_minus');
// const input = document.querySelector('.quantity__input');
// plus.addEventListener("click", () => {
// input.value = parseInt(input.value) + 1;
// });
// minus.addEventListener("click", () => {
// if (input.value <= 0) {
// input.value = 0;
// }
// else {
// input.value = parseInt(input.value) - 1; 
// }
// })
function rating() {
  const ratingItemList = document.querySelectorAll('.rating__item');
  const ratingItemArray = Array.prototype.slice.call(ratingItemList);
  ratingItemArray.forEach(item => item.addEventListener('click', () => {
    const {
      itemValue
    } = item.dataset;
    item.parentNode.dataset.totalValue = item.dataset.itemValue; // request
  }));
}

rating();
function selectToggle() {
  const select = document.querySelector('.select');
  select.addEventListener('click', () => {
    select.classList.toggle('select_active');
  });
}

selectToggle();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2FwcC5qcyIsImpzL21vZHVsZXMvYnVyZ2VyTmF2LmpzIiwianMvbW9kdWxlcy9mb3JtRGF0YS5qcyIsImpzL21vZHVsZXMvZ2FsbGVyeS5qcyIsImpzL21vZHVsZXMvbWFzay5qcyIsImpzL21vZHVsZXMvbW9kYWwuanMiLCJqcy9tb2R1bGVzL25hdlN0aWNreS5qcyIsImpzL21vZHVsZXMvcXVhbnRpdHkuanMiLCJqcy9tb2R1bGVzL3JhdGluZy5qcyIsImpzL21vZHVsZXMvc2VsZWN0VG9nZ2xlLmpzIl0sIm5hbWVzIjpbImJ1cmdlck5hdiIsImJ1cmdlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lbnUiLCJtZW51TGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvc2VMaW5rIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZSIsImZvckVhY2giLCJsaW5rIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZm9ybURhdGEiLCJvdXRwdXRUaXRsZSIsInRleHRDb250ZW50Iiwib3V0cHV0QXJ0Iiwib3V0cHV0RGF0YSIsImlubmVySFRNTCIsImdhbGxlcnlJbWFnZSIsInNtYWxsSW1nIiwiYmlnUGhvdG8iLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsIm1vZGFsIiwibW9kYWxCdG4iLCJtb2RhbENsb3NlIiwibW9kYWxTZW5kIiwibWFzayIsIm1CdG4iLCJhZGQiLCJuYXZTdGlja3kiLCJsYXN0U2Nyb2xsVG9wIiwiaGVhZGVyTmF2IiwiaGVhZGVyIiwid2luZG93Iiwic2Nyb2xsVG9wIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsIm9wYWNpdHkiLCJxdWFudGl0eSIsInBsdXMiLCJtaW51cyIsImlucHV0IiwiZGF0YSIsImEiLCJ2YWx1ZSIsInJhdGluZyIsInJhdGluZ0l0ZW1MaXN0IiwicmF0aW5nSXRlbUFycmF5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJpdGVtIiwiaXRlbVZhbHVlIiwiZGF0YXNldCIsInBhcmVudE5vZGUiLCJ0b3RhbFZhbHVlIiwic2VsZWN0VG9nZ2xlIiwic2VsZWN0Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBRUE7QUFDQTtBQ0pBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkIsUUFBTUMsTUFBTSxHQUFHQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsU0FBdkIsQ0FBZjtBQUNBLFFBQU1DLElBQUksR0FBR0YsUUFBUSxDQUFDQyxhQUFULENBQXVCLGFBQXZCLENBQWI7QUFDQSxRQUFNRSxTQUFTLEdBQUdELElBQUksQ0FBQ0UsZ0JBQUwsQ0FBc0IsbUJBQXRCLENBQWxCO0FBQ0EsUUFBTUMsU0FBUyxHQUFHSCxJQUFJLENBQUNELGFBQUwsQ0FBbUIsa0JBQW5CLENBQWxCO0FBRUFJLEVBQUFBLFNBQVMsQ0FBQ0MsZ0JBQVYsQ0FBMkIsT0FBM0IsRUFBb0MsTUFBTTtBQUN4Q0osSUFBQUEsSUFBSSxDQUFDSyxTQUFMLENBQWVDLE1BQWYsQ0FBc0IsTUFBdEI7QUFDRCxHQUZEO0FBSUFULEVBQUFBLE1BQU0sQ0FBQ08sZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUMsTUFBTTtBQUNyQ0osSUFBQUEsSUFBSSxDQUFDSyxTQUFMLENBQWVFLE1BQWYsQ0FBc0IsTUFBdEI7QUFDRCxHQUZEO0FBR0FOLEVBQUFBLFNBQVMsQ0FBQ08sT0FBVixDQUFtQkMsSUFBRCxJQUFVO0FBQzFCQSxJQUFBQSxJQUFJLENBQUNMLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLE1BQU07QUFDbkNKLE1BQUFBLElBQUksQ0FBQ0ssU0FBTCxDQUFlQyxNQUFmLENBQXNCLE1BQXRCO0FBQ0QsS0FGRDtBQUdELEdBSkQ7QUFLQVIsRUFBQUEsUUFBUSxDQUFDTSxnQkFBVCxDQUEwQixPQUExQixFQUFvQ00sS0FBRCxJQUFXO0FBQzVDLFFBQUksRUFBRUEsS0FBSyxDQUFDQyxNQUFOLENBQWFDLE9BQWIsQ0FBcUIsYUFBckIsS0FBdUNGLEtBQUssQ0FBQ0Ms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QUFQLENBQXdCLE9BQXhCLEVBQWlDLE1BQU07QUFDckN5RCxJQUFBQSxNQUFNLENBQUN4RCxTQUFQLENBQWlCRSxNQUFqQixDQUF3QixlQUF4QjtBQUNELEdBRkQ7QUFHQzs7QUFDRHFELFlBQVkiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydHsgcXVhbnRpdHkgfSBmcm9tIFwiLi9tb2R1bGUvbW9kYWwuanNcIlxyXG4vLyBpbXBvcnR7IG1vZGFsIH0gZnJvbSBcIi4vbW9kdWxlL21vZGFsLmpzXCJcclxuXHJcbi8vIHF1YW50aXR5KCk7XHJcbi8vIG1vZGFsKCk7XHJcbiIsImZ1bmN0aW9uIGJ1cmdlck5hdigpIHtcclxuICBjb25zdCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyJylcclxuICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1uYXYnKVxyXG4gIGNvbnN0IG1lbnVMaW5rcyA9IG1lbnUucXVlcnlTZWxlY3RvckFsbCgnLmJ1cmdlci1uYXZfX2xpbmsnKVxyXG4gIGNvbnN0IGNsb3NlTGluayA9IG1lbnUucXVlcnlTZWxlY3RvcihcImFbaHJlZj0nI2Nsb3NlJ11cIilcclxuXHJcbiAgY2xvc2VMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJylcclxuICB9KVxyXG5cclxuICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKVxyXG4gIH0pXHJcbiAgbWVudUxpbmtzLmZvckVhY2goKGxpbmspID0+IHtcclxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpXHJcbiAgICB9KVxyXG4gIH0pXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgIGlmICghKGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuYnVyZ2VyLW5hdicpIHx8IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuYnVyZ2VyJykpKVxyXG4gICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKVxyXG4gIH0pXHJcbn1cclxuYnVyZ2VyTmF2KCk7IiwiZnVuY3Rpb24gZm9ybURhdGEoKSB7XHJcbiAgbGV0IG91dHB1dFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLWRlc2NyaXB0aW9uX190aXRsZVwiKS50ZXh0Q29udGVudDtcclxuICBsZXQgb3V0cHV0QXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLWRlc2NyaXB0aW9uX190ZXh0XCIpLnRleHRDb250ZW50O1xyXG4gIGxldCBvdXRwdXREYXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpdGVtTmFtZVwiKVxyXG4gIG91dHB1dERhdGEuaW5uZXJIVE1MID0gb3V0cHV0VGl0bGUgKyBcIiDRgSDQsNGA0YLQuNC60YPQu9C+0LwgXCIgKyBvdXRwdXRBcnRcclxufVxyXG5mb3JtRGF0YSgpIiwiIGxldCBnYWxsZXJ5SW1hZ2UgPSBzbWFsbEltZyA9PiB7XHJcbiAgY29uc3QgYmlnUGhvdG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlnUGhvdG8nKTtcclxuICBiaWdQaG90by5zcmMgPSBzbWFsbEltZy5zcmM7XHJcbn1cclxuIiwiLy8gbGV0IG1hc2sgPSAoKSA9PiB7XHJcbi8vICBtYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuLy8gICBtYXNrLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXJfX21hc2snKVxyXG4vLyB9IiwiZnVuY3Rpb24gbW9kYWwoKSB7XHJcbiAgY29uc3QgbW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1jYXJ0X19idXR0b24nKVxyXG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcclxuICBjb25zdCBtb2RhbENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1jbG9zZScpXHJcbiAgY29uc3QgbW9kYWxTZW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJ1dHRvbicpXHJcbiAgY29uc3QgbWFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbWFzaycpXHJcbiAgbW9kYWxCdG4uZm9yRWFjaCgobUJ0bikgPT4ge1xyXG4gICAgbUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgICAgbWFzay5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgfSlcclxuICB9KVxyXG4gIG1hc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgbWFzay5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gIH0pXHJcbiAgbW9kYWxDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICBtYXNrLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgfSlcclxuICBtb2RhbFNlbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgbWFzay5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gIH0pXHJcblxyXG59XHJcbm1vZGFsKCk7XHJcbiIsImxldCBuYXZTdGlja3kgPSAoKSA9PiB7XHJcbiAgbGV0IGxhc3RTY3JvbGxUb3AgPSA1MDA7XHJcbiAgLy8gY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xyXG4gIGhlYWRlck5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbmF2Jyk7IFxyXG4gIFxyXG4gIGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG4gICAgbGV0IHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgaWYgKHNjcm9sbFRvcCA+IGxhc3RTY3JvbGxUb3ApIHtcclxuICAgICAgaGVhZGVyLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gICAgICBoZWFkZXJOYXYuc3R5bGUub3BhY2l0eSA9IDA7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGVhZGVyLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gICAgICBoZWFkZXJOYXYuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbm5hdlN0aWNreSgpOyIsIiBmdW5jdGlvbiAgcXVhbnRpdHkoKSB7XHJcbiAgICBjb25zdCBwbHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1YW50aXR5X19idXR0b25fcGx1cycpO1xyXG4gICAgY29uc3QgbWludXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVhbnRpdHlfX2J1dHRvbl9taW51cycpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVhbnRpdHlfX2lucHV0Jyk7XHJcbiAgICBjb25zdCBkYXRhID0gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpdGVtUXVhbnRpdHknKTtcclxuICAgIGxldCBhID0gMTtcclxuICAgIHBsdXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBhKys7XHJcbiAgICAgICAgLy8gYSA9IChhIDwgMTApID8gXCIwXCIgKyBhIDogYTtcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IGE7XHJcbiAgICAgICAgZGF0YS5pbm5lckhUTUwgPSBhO1xyXG5cclxuICAgIH0pO1xyXG4gICAgbWludXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBpZiAoYSA+IDApIHtcclxuICAgICAgICAgICAgYS0tO1xyXG4gICAgICAgICAgICAvLyBhID0gKGEgPCAxMCkgPyBcIjBcIiArIGEgOiBhO1xyXG4gICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBhO1xyXG4gICAgICAgICAgICAgZGF0YS5pbm5lckhUTUwgPSBhO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIFxyXG59XHJcbnF1YW50aXR5KClcclxuXHJcbi8vIGxldCB1cGRhdGVRdWFudGl0eSA9ICgpID0+IHtcclxuLy8gICAgIC8vIGxldCBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnAnKVxyXG4vLyAgICBsZXQgcCA9IHF1YW50aXR5KCk7XHJcbi8vICAgICBjb25zb2xlLmxvZyhwKVxyXG4vLyB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBjb25zdCBwbHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1YW50aXR5X19idXR0b25fcGx1cycpO1xyXG4vLyBjb25zdCBtaW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWFudGl0eV9fYnV0dG9uX21pbnVzJyk7XHJcbi8vIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1YW50aXR5X19pbnB1dCcpO1xyXG4vLyBwbHVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbi8vIGlucHV0LnZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUpICsgMTtcclxuLy8gfSk7XHJcbi8vIG1pbnVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbi8vIGlmIChpbnB1dC52YWx1ZSA8PSAwKSB7XHJcbi8vIGlucHV0LnZhbHVlID0gMDtcclxuLy8gfVxyXG4vLyBlbHNlIHtcclxuLy8gaW5wdXQudmFsdWUgPSBwYXJzZUludChpbnB1dC52YWx1ZSkgLSAxOyBcclxuLy8gfVxyXG4vLyB9KSIsImZ1bmN0aW9uIHJhdGluZygpIHtcclxuICBjb25zdCByYXRpbmdJdGVtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yYXRpbmdfX2l0ZW0nKTtcclxuICBjb25zdCByYXRpbmdJdGVtQXJyYXkgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChyYXRpbmdJdGVtTGlzdCk7XHJcblxyXG4gIHJhdGluZ0l0ZW1BcnJheS5mb3JFYWNoKGl0ZW0gPT5cclxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHtcclxuICAgICAgICBpdGVtVmFsdWVcclxuICAgICAgfSA9IGl0ZW0uZGF0YXNldDtcclxuICAgICAgaXRlbS5wYXJlbnROb2RlLmRhdGFzZXQudG90YWxWYWx1ZSA9IGl0ZW0uZGF0YXNldC5pdGVtVmFsdWU7XHJcbiAgICAgIC8vIHJlcXVlc3RcclxuICAgIH0pXHJcbiAgKTtcclxufVxyXG5yYXRpbmcoKTsiLCJmdW5jdGlvbiBzZWxlY3RUb2dnbGUoKSB7XHJcbmNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QnKTtcclxuc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHNlbGVjdC5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RfYWN0aXZlJylcclxufSk7XHJcbn1cclxuc2VsZWN0VG9nZ2xlKCk7Il19
